@using MoneySaver.Web.ViewModels.Home
@model IndexViewModel
@{
    this.ViewData["Title"] = "Home";
    string badgeClassName = "success";
    this.ViewData["ReturnUrl"] = "/";
}
<div class="bg-white">
    <div class="template-demo mb-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-custom bg-inverse-primary">
                <li class="breadcrumb-item active" aria-current="page"><span>Home</span></li>
            </ol>
        </nav>
    </div>
</div>
<div class="row mb-4">
    <div class="col-12">
        <div class="form-inline d-flex justify-content-center h3">
            Account Overview
        </div>
    </div>
</div>

<div class="col-lg-6 col-12 col-sm-12 grid-margin grid-margin stretch-card float-left">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title"><span class="badge bg-inverse-success"><span class="mdi mdi-arrow-right-bold text-success"></span></span> Last 30 days incomes</h4>
            <div class="table-responsive">
                <table class="table text-center table-bordered table-hover">
                    <thead>
                        <tr>
                            <th class="pt-1 pl-2">
                                <span class="small font-weight-bold">Category</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold">Incomes Amount</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold">%</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold">Wallet</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var category in Model.CategoriesLast30DaysIncomes.Where(c => c.TotalIncomesLast30days != 0).OrderByDescending(c => c.TotalIncomesLast30days))
                        {
                            <tr class="card-shadow">
                                <td class="py-1">
                                    <div class="d-flex align-items-center">
                                        <div class="ml-3">
                                            <a asp-controller="Categories" asp-action="Details" asp-route-id="@category.CategoryId"><p class="mb-2 badge badge-@category.BadgeColor.ToString().ToLower()">@category.CategoryName</p></a>
                                            <p class="text-muted text-small">@category.TotalIncomeRecordsLast30Days incomes</p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    @if (category.TotalIncomesLast30days < 0)
                                    {
                                        badgeClassName = "danger";
                                    }

                                    else if (category.TotalIncomesLast30days == 0)
                                    {
                                        badgeClassName = "secondary";
                                    }

                                    else
                                    {
                                        badgeClassName = "success";
                                    }
                                    <p class="text-@badgeClassName font-weight-bold small">
                                        @category.TotalIncomesLast30days  @category.CurrencyCode
                                    </p>
                                </td>
                                <td>
                                    <p class="font-weight-bold text-info small" style="white-space: nowrap;">

                                        @{
                                            decimal percentOfAllWalletIncomes = 0;

                                            if (Model.TotalAccountIncomesLast30Days != 0)
                                            {
                                                percentOfAllWalletIncomes = Math.Round((category.TotalIncomesLast30days / Model.TotalAccountIncomesLast30Days * 100), 1);
                                            }
                                        }

                                        @percentOfAllWalletIncomes %

                                    </p>
                                </td>
                                <td>
                                    <a asp-controller="Wallets" asp-action="Details" asp-route-id="@category.WalletId" class="badge badge-primary text-light">@category.WalletName</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                @if (Model.CategoriesLast30DaysIncomes.Count() < 1)
                {<br />
                    <div class="btn-group form-inline">
                        <div class="input-group-sm mr-sm-1 mb-0">
                            BUTTON HERE
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="col-lg-6 col-12 col-sm-12 grid-margin grid-margin stretch-card float-left">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title"><span class="badge bg-inverse-danger"><span class="mdi mdi-arrow-left-bold text-danger"></span> </span> Last 30 days expenses</h4>
            <div class="table-responsive">
                <table class="table text-center table-bordered table-hover">
                    <thead>
                        <tr>
                            <th class="pt-1">
                                <span class="small font-weight-bold">Category</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold">Expenses Amount</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold"> %</span>
                            </th>
                            <th class="pt-1">
                                <span class="small font-weight-bold"> Wallet</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var category in Model.CategoriesLast30DaysExpenses.Where(c => c.TotalExpensesLast30Days != 0).OrderBy(c => c.TotalExpensesLast30Days))
                        {
                            <tr class="card-shadow">
                                <td class="py-1 pl-0">
                                    <div class="d-flex align-items-center">
                                        <div class="ml-3">
                                            <a asp-controller="Categories" asp-action="Details" asp-route-id="@category.CategoryId"><p class="mb-2 badge badge-@category.BadgeColor.ToString().ToLower()">@category.CategoryName</p></a>
                                            <p class="text-muted text-small">@category.TotalExpenseRecordsLast30Days expenses</p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    @if (category.TotalExpensesLast30Days < 0)
                                    {
                                        badgeClassName = "danger";
                                    }

                                    else if (category.TotalExpensesLast30Days == 0)
                                    {
                                        badgeClassName = "secondary";
                                    }

                                    else
                                    {
                                        badgeClassName = "success";
                                    }
                                    <p class="text-@badgeClassName font-weight-bold  small">@category.TotalExpensesLast30Days @category.CurrencyCode</p>
                                </td>
                                <td>
                                    <p class="font-weight-bold text-info small" style="white-space: nowrap;">

                                        @{
                                            decimal percentOfAllWalletExpenses = 0;

                                            if (Model.TotalAccountExpensesLast30Days != 0)
                                            {
                                                percentOfAllWalletExpenses =
                                                    Math.Round(
                                                        (Math.Abs(category.TotalExpensesLast30Days) / Math.Abs(Model.TotalAccountExpensesLast30Days) * 100)
                                                        , 1);
                                            }
                                        }

                                        @percentOfAllWalletExpenses %

                                    </p>
                                </td>
                                <td>

                                    <a asp-controller="Wallets" asp-action="Details" asp-route-id="@category.WalletId" class="badge badge-primary text-light">@category.WalletName</a>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                @if (Model.CategoriesLast30DaysExpenses.Count() < 1)
                {<br />
                    <div class="btn-group form-inline">
                        <div class="input-group-sm mr-sm-1 mb-0">
                            BUTTON HERE
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4 grid-margin stretch-card" id="active-lists">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Active Todo Lists</h4>        
                <div class="list-wrapper">
                    <ul class="d-flex flex-column-reverse todo-list todo-list-custom">
                        @foreach (var list in Model.ActiveToDoLists.Take(4))
                        {
                            <li>
                                <span class="form-check">
                                    <form class="form-inline" method="post" asp-route-returnurl="@ViewData["ReturnUrl"]" asp-controller="ToDoLists" asp-action="ChangeListStatus" asp-route-id="@list.Id" data-toggle="tooltip" data-placement="bottom" title="Mark all list as completed">
                                        <button type="submit" style="width: 15px; height: 30px;" class="mdi mdi-check btn btn-outline-primary btn-sm mr-3 pr-3 pl-1 pb-1 pt-1"></button>
                                        @list.Name
                                    </form>
                                </span>
                                <div class="col d-flex justify-content-end">
                                    <a asp-controller="ToDoLists" asp-action="Edit" asp-route-id="@list.Id"><span class="mdi mdi-pencil btn btn-sm btn-outline-info pr-4 pl-2 pb-1 pt-1 mb-1" style="width: 20px; height: 30px; margin-top: 3px;" data-toggle="tooltip" data-placement="bottom" title="Edit list"></span></a>
                                </div>
                            </li>
                        }
                    </ul>
                    <div class="row mt-3">
                        <a asp-controller="ToDoLists" asp-action="Add"><span class="mr-2 btn btn-sm btn-primary" data-toggle="tooltip" data-placement="bottom" title="Add list"><i class="mdi mdi-plus"></i> Add</span></a>
                        <a asp-controller="ToDoLists" asp-action="AllLists"><span class="btn btn-sm btn-primary" data-toggle="tooltip" data-placement="bottom" title="All lists"><i class="mdi mdi-format-list-checks"></i> All</span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Recommended</h4>
                <div class="d-flex align-items-center pb-3 border-bottom">
                    <img class="img-sm rounded-circle" src="../../../../images/faces/face5.jpg" alt="profile">
                    <div class="ml-3">
                        <h6 class="mb-1">Stella Davidson</h6>
                        <small class="text-muted mb-0"><i class="mdi mdi-map-marker mr-1"></i>New York City, USA</small>
                    </div>
                    <i class="mdi mdi-check-circle-outline font-weight-bold ml-auto px-1 py-1 text-info mdi-24px"></i>
                </div>
                <div class="d-flex align-items-center py-3 border-bottom">
                    <img class="img-sm rounded-circle" src="../../../../images/faces/face6.jpg" alt="profile">
                    <div class="ml-3">
                        <h6 class="mb-1">Daniel Russel</h6>
                        <small class="text-muted mb-0"><i class="mdi mdi-map-marker mr-1"></i>Florida, USA</small>
                    </div>
                    <i class="mdi mdi-plus-circle-outline font-weight-bold ml-auto px-1 py-1 text-success mdi-24px"></i>
                </div>
                <div class="d-flex align-items-center py-3 border-bottom">
                    <img class="img-sm rounded-circle" src="../../../../images/faces/face7.jpg" alt="profile">
                    <div class="ml-3">
                        <h6 class="mb-1">Bruno King</h6>
                        <small class="text-muted mb-0"><i class="mdi mdi-map-marker mr-1"></i>Arkansas, USA</small>
                    </div>
                    <i class="mdi mdi-check-circle-outline font-weight-bold ml-auto px-1 py-1 text-info mdi-24px"></i>
                </div>
                <div class="d-flex align-items-center py-3 border-bottom">
                    <img class="img-sm rounded-circle" src="../../../../images/faces/face8.jpg" alt="profile">
                    <div class="ml-3">
                        <h6 class="mb-1">David Moore</h6>
                        <small class="text-muted mb-0"><i class="mdi mdi-map-marker mr-1"></i>Arizon, USA</small>
                    </div>
                    <i class="mdi mdi-plus-circle-outline font-weight-bold ml-auto px-1 py-1 text-success mdi-24px"></i>
                </div>
                <div class="d-flex align-items-center pt-3 mb-4">
                    <img class="img-sm rounded-circle" src="../../../../images/faces/face9.jpg" alt="profile">
                    <div class="ml-3">
                        <h6 class="mb-1">Rafell John</h6>
                        <small class="text-muted mb-0"><i class="mdi mdi-map-marker mr-1"></i>Alaska, USA</small>
                    </div>
                    <i class="mdi mdi-plus-circle-outline font-weight-bold ml-auto px-1 py-1 text-success mdi-24px"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Updates</h4>
                <ul class="bullet-line-list">
                    <li>
                        <h6>User confirmation</h6>
                        <p class="mb-0">Lorem Ipsum is simply dummy text of the printing </p>
                        <p class="text-muted">
                            <i class="mdi mdi-clock-outline"></i>
                            7 months ago.
                        </p>
                    </li>
                    <li>
                        <h6>Continuous evaluation</h6>
                        <p class="mb-0">Lorem Ipsum is simply dummy text of the printing </p>
                        <p class="text-muted">
                            <i class="mdi mdi-clock-outline"></i>
                            7 months ago.
                        </p>
                    </li>
                    <li>
                        <h6>Promotion</h6>
                        <p class="mb-0">Lorem Ipsum is simply dummy text of the printing </p>
                        <p class="text-muted">
                            <i class="mdi mdi-clock-outline"></i>
                            7 months ago.
                        </p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>





    <div class="row">
        <div class="col-md-6 col-lg-3 grid-margin stretch-card">
            <div class="card bg-gradient-primary text-white text-center card-shadow-primary">
                <div class="card-body">
                    <h6 class="font-weight-normal">Total invoices</h6>
                    <h2 class="mb-0">28893</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3 grid-margin stretch-card">
            <div class="card bg-gradient-danger text-white text-center card-shadow-danger">
                <div class="card-body">
                    <h6 class="font-weight-normal">Total invoices</h6>
                    <h2 class="mb-0">28893</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3 grid-margin stretch-card">
            <div class="card bg-gradient-warning text-white text-center card-shadow-warning">
                <div class="card-body">
                    <h6 class="font-weight-normal">Total invoices</h6>
                    <h2 class="mb-0">28893</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3 grid-margin stretch-card">
            <div class="card bg-gradient-info text-white text-center card-shadow-info">
                <div class="card-body">
                    <h6 class="font-weight-normal">Total invoices</h6>
                    <h2 class="mb-0">28893</h2>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4 grid-margin stretch-card">
            <div class="card">
                <div class="card-body pb-0">
                    <h4 class="card-title">Daily Sales</h4>
                    <div class="d-flex justify-content-between justify-content-lg-start flex-wrap">
                        <div class="mr-5 mb-2">
                            <h3>
                                56789
                            </h3>
                            <h6 class="font-weight-normal mb-0">
                                Online sales
                            </h6>
                        </div>
                        <div class="mb-2">
                            <h3>
                                12345
                            </h3>
                            <h6 class="font-weight-normal mb-0">
                                Sales in store
                            </h6>
                        </div>
                    </div>
                </div>
                <div class="card-body d-flex align-items-end p-0">
                    <div class="mt-auto w-100">
                        <div id="sales-legend" class="chartjs-legend mt-2 mb-4"></div>
                        <canvas id="chart-sales"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <h6 class="card-title">Activity</h6>
                    </div>
                    <div class="list d-flex align-items-center border-bottom pb-3">
                        <img class="img-sm rounded-circle" src="https://via.placeholder.com/43x43" alt="">
                        <div class="wrapper w-100 ml-3">
                            <p><b>Dobrick </b>published an article</p>
                            <small class="text-muted">2 hours ago</small>
                        </div>
                    </div>
                    <div class="list d-flex align-items-center border-bottom py-3">
                        <img class="img-sm rounded-circle" src="https://via.placeholder.com/43x43" alt="">
                        <div class="wrapper w-100 ml-3">
                            <p><b>Stella </b>created an event</p>
                            <small class="text-muted">3 hours ago</small>
                        </div>
                    </div>
                    <div class="list d-flex align-items-center border-bottom py-3">
                        <img class="img-sm rounded-circle" src="https://via.placeholder.com/43x43" alt="">
                        <div class="wrapper w-100 ml-3">
                            <p><b>Peter </b>submitted the reports</p>
                            <small class="text-muted">1 hours ago</small>
                        </div>
                    </div>
                    <div class="list d-flex align-items-center border-bottom py-3">
                        <img class="img-sm rounded-circle" src="https://via.placeholder.com/43x43" alt="">
                        <div class="wrapper w-100 ml-3">
                            <p><b>Nateila </b>updated the docs</p>
                            <small class="text-muted">1 hours ago</small>
                        </div>
                    </div>
                    <div class="list d-flex align-items-center pt-3">
                        <img class="img-sm rounded-circle" src="https://via.placeholder.com/43x43" alt="">
                        <div class="wrapper w-100 ml-3">
                            <p><b>Tom </b>uploaded the demo</p>
                            <small class="text-muted">3 hours ago</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Traffic</h4>
                    <div class="w-50 mx-auto">
                        <canvas id="traffic-chart" width="100" height="100"></canvas>
                    </div>
                    <div class="text-center mt-5">
                        <h4 class="mb-2">
                            Traffic for the day
                        </h4>
                        <p class="card-description mb-5">Traffic through the sources google and facebook for the day</p>
                    </div>
                    <div id="traffic-chart-legend" class="chartjs-legend traffic-chart-legend"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row grid-margin">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Last Records</h4>
                    <div class="d-flex table-responsive">

                        <vc:add-record wallet-id="3"></vc:add-record>
                        <!--<div class="btn-group mr-2">
                            <button class="btn btn-sm btn-primary" onclick="location.href='/Records/Add?walletId=3'" type="button"><i class="mdi mdi-plus-circle-outline"></i> Add</button>
                        </div> -->

                        <div class="btn-group mr-2">
                            <button type="button" class="btn btn-light"><i class="mdi mdi-alert-circle-outline"></i></button>
                            <button type="button" class="btn btn-light"><i class="mdi mdi-delete-empty"></i></button>
                        </div>
                        <div class="btn-group mr-2">
                            <button type="button" class="btn btn-light"><i class="mdi mdi-printer"></i></button>
                        </div>
                        <div class="btn-group ml-auto mr-2 border-0 d-none d-md-block">
                            <input type="text" class="form-control" placeholder="Search Here">
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-light"><i class="mdi mdi-cloud"></i></button>
                            <button type="button" class="btn btn-light"><i class="mdi mdi-dots-vertical"></i></button>
                        </div>
                    </div>
                    <div class="table-responsive mt-2">
                        <table class="table mt-3 border-top">
                            <thead>
                                <tr>
                                    <th>Invoice</th>
                                    <th>Customer</th>
                                    <th>Ship</th>
                                    <th>Best Price</th>
                                    <th>Purchsed Price</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>50014</td>
                                    <td>David Grey</td>
                                    <td>Italy</td>
                                    <td>$6300</td>
                                    <td>$2100</td>
                                    <td><div class="badge badge-success badge-fw">Progress</div></td>
                                </tr>
                                <tr>
                                    <td>50015</td>
                                    <td>Stella Johnson</td>
                                    <td>Brazil</td>
                                    <td>$4500</td>
                                    <td>$4300</td>
                                    <td><div class="badge badge-warning badge-fw">Open</div></td>
                                </tr>
                                <tr>
                                    <td>50016</td>
                                    <td>Marina Michel</td>
                                    <td>Japan</td>
                                    <td>$4300</td>
                                    <td>$6440</td>
                                    <td><div class="badge badge-danger badge-fw">On hold</div></td>
                                </tr>
                                <tr>
                                    <td>50017</td>
                                    <td>John Doe</td>
                                    <td>India</td>
                                    <td>$6400</td>
                                    <td>$2200</td>
                                    <td><div class="badge badge-success badge-fw">Progress</div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex align-items-center justify-content-between flex-column flex-sm-row mt-4">
                        <p class="mb-3 mb-sm-0">Showing 1 to 20 of 20 entries</p>
                        <nav>
                            <ul class="pagination pagination-primary mb-0">
                                <li class="page-item"><a class="page-link"><i class="mdi mdi-chevron-left"></i></a></li>
                                <li class="page-item active"><a class="page-link">1</a></li>
                                <li class="page-item"><a class="page-link">2</a></li>
                                <li class="page-item"><a class="page-link">3</a></li>
                                <li class="page-item"><a class="page-link">4</a></li>
                                <li class="page-item"><a class="page-link"><i class="mdi mdi-chevron-right"></i></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @section Scripts {

    }

